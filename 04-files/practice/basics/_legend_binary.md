# Бинарные файлы - введение

Любой файл (не важно, текстовый или нет) - это последовательность байтов. 
Говоря формально, любой файл - бинарный.

На практике же, как правило, бинарными (двоичными) файлами называют не-текстовые файлы.
Для успешной работы с таким файлом нужно знать его структуру.

Например, есть файл `hi.bin` с таким содержимым:
```
0001 0101 0000 0100 0000 1010 0000 0011
```

Для удобства, переведём каждый байт в числовое представление:
```
21 4 10 3 
```

Что здесь записано? 21 может быть как дневной температурой в июне, так и количеством студентов в группе.
4 может быть как количеством яблок на подносе, так и чьей-то оценкой
(причём, не обязательно по пятибальной шкале!).

Другими словами, вне контекста любой двоичный файл - это набор "мусора".
И только узнав, что это за файл (например, по его расширению или источнику),
можно извлечь оттуда полезную информацию.

## Бинарные файлы в Python

Работа с бинарными файлами в Python осуществляется примерно так же, как и с текстовыми.

При открытии файла в строке режима необходимо указать букву `b`:
```python
file = open(filename, 'wb')
```

Чтобы прочитать данные, используем функцию read(), указав количество байт для чтения.

```python
data = file.read(4) # 4 байта
```

Восстановить число, закодированное этими байтами, можно, например, так:
```python
num = int.from_bytes(data, byteorder='big', signed=True)
```

В параметре signed указывается, поддерживает ли тип данных отрицательные значения (True - да).


Параметр byteorder обозначает порядок, в котором байты хранятся в памяти
при записи числа, состоящего из нескольких байт (см. рисунок ниже).

В этом assignment'е для простоты везде используется `byteorder='big'`.

![https://i.imgur.com/UDxjYo2.png](https://i.imgur.com/UDxjYo2.png)

Конвертировать число в байты и записать их в файл можно следующим образом:
```python
n = 18
data = n.to_bytes(4, byteorder='big', signed=True)
file.write(data)
```

Здесь, `4` означает, что под число выделяется 4 байта.

Кодировать/декодировать строки можно аналогичным образом:
```python
s = 'hello world!'
data = s.encode('utf-8')
mystring = data.decode('utf-8')
```

Стоит обратить внимание, что здесь в качестве параметра передаётся кодировка.
Рекомендуется использовать `UTF-8`, если не указано иное.

Обратите внимание: кол-во байт строки  НЕ РАВНО количеству символов в строке.
